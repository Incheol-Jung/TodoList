<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Todo List</title>
        <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css" />
        <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css" />
        <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"></script>
    </head>
    <body>
        1. 검색(조회, 페이징)
        2. 수정(참조가능)
        3. 추가(참조가능)
        4. 삭제
        <button id="testBtn">test button</button>
        <div id="jsGrid"></div>
    </body>
    <script>
        var clients = [
            { "id": 1, "task": "Study", "referenceIds": [1,2,3,4], "createdDate": "2018-09-16 12:00:00", "updatedDate": "2018-09-16 12:00:00", "isDone": false },
            { "id": 2, "task": "Java", "referenceIds": [1,], "createdDate": "2018-09-17 10:00:00", "updatedDate": "2018-09-16 12:00:00", "isDone": true },
            { "id": 3, "task": "Spring", "referenceIds": [], "createdDate": "2018-09-18 11:00:00", "updatedDate": "2018-09-16 12:00:00", "isDone": true },
            { "id": 4, "task": "C#", "referenceIds": [1,2,3], "createdDate": "2018-09-19 09:00:00", "updatedDate": "2018-09-16 12:00:00", "isDone": false }
            ];
     
        var countries = [
            { Name: "", Id: 0 },
            { Name: "United States", Id: 1 },
            { Name: "Canada", Id: 2 },
            { Name: "United Kingdom", Id: 3 }
        ];

        $("#pager").on("change", function() {
            var page = parseInt($(this).val(), 10);
            $("#jsGrid").jsGrid("openPage", page);
        });
     
        $("#jsGrid").jsGrid({
            width: "100%",
            height: "400px",
        
            filtering: true,
            sorting: true,
            paging: true,
            autoload: true,

            pageIndex: 1,
            pageSize: 10,
            pageButtonCount: 10,
            
            controller: {
                loadData: function(parameters) {
                    var d = $.Deferred();
                    $.ajax({
                        url: "http://localhost:29801/todo?pageNumber=0&pageSize=10",
                        dataType: "json"
                    }).done(function(response) {
                        d.resolve(response.value);
                    });
    
                    return d.promise();
                }
            },

     
            fields: [
                { name: "id", title: "ID", type: "number", width: 50, validate: "required" },
                { name: "task", title: "Task", type: "text", width: 150 },
                { name: "referenceIds", title: "Reference Ids", type: "text", width: 100,
                    itemTemplate: function(value) {
                        return $("<div>").append(Array(value).join("&#9733;"));
                    }
                 },
                { name: "createdDate", title: "Created Date", type: "text", width: 200, readOnly:true  },
                { name: "updatedDate", title: "Updated Date", type: "text", width: 200, readOnly:true },
                { name: "isDone", type: "checkbox", title: "Done", sorting: false },
                {
                    type: "control",
                    modeSwitchButton: false,
                    editButton: false,
                    headerTemplate: function() {
                        return $("<button>").attr("type", "button").text("Add")
                                .on("click", function () {
                                    showDetailsDialog("Add", {});
                                });
                    }
                }
      
            ],
            onItemInserting: function(args) {
                alert("onItemInserting");
            },
            onItemUpdating: function(args) {
                alert("onItemUpdating");
            },
            onItemDeleting: function(args) {
                alert("onItemDeleting");
            },
            onPageChanged: function(args) {
                alert("onPageChanged");
            },
            onDataLoading: function(args) {
                alert("onDataLoading");
            },
            rowClick: function(args) { 
                alert("rowClick");
            }
        });

        $("#testBtn").on("click", function(){
            $("#jsGrid").jsGrid("loadData", { Name: "John" }).done(function() {
                console.log("data loaded");
            });
        });
    </script>
</html>